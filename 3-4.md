# Техническое задание на разработку Telegram-бота для кофейни

## 1. Введение

Настоящее техническое задание (ТЗ) описывает требования к разработке Telegram-бота для местной кофейни. Бот предназначен для привлечения клиентов в непиковые часы путем упрощения процесса заказа кофе и сопутствующих товаров. Он будет функционировать как инструмент онлайн-заказов, интегрированный с платежными системами и опциями доставки/самовывоза. Разработка ориентирована на владельцев кофейни (заказчик) и конечных пользователей (клиенты кофейни). Проект реализуется для повышения лояльности клиентов и оптимизации трафика в заведении.

## 2. Цели и задачи

### Цели
- Привлечь дополнительный поток клиентов в непиковые часы (например, утро или вечер) за счет удобного онлайн-заказа.
- Увеличить средний чек за счет возможности выбора нескольких позиций из меню.
- Создать уникальный продукт, повышающий вовлеченность пользователей через развлекательные элементы (бонусные фичи).

### Задачи
- Разработать интерфейс для просмотра и выбора позиций из меню.
- Реализовать механизм добавления нескольких товаров в корзину.
- Интегрировать оплату по QR-коду с подтверждением успешной транзакции.
- Предоставить опции получения заказа: самовывоз или доставка с указанием адреса.
- (Бонус) Интегрировать нейронную сеть для неформального общения с пользователями (хи-хи-ха-ха).
- (Бонус) Внедрить систему NFT-стикеров в Telegram для фиксации уникальных позиций меню за пользователями.

## 3. Требования к функционалу

Бот должен обеспечивать следующую функциональность, разбитую по модулям:

- **Просмотр меню**: Отображение актуального меню кофейни (кофе, десерты, закуски) с описаниями, ценами и изображениями. Меню загружается из базы данных или внешнего источника.
- **Выбор позиций**: Пользователь может добавить несколько позиций в корзину, редактировать количество, удалять товары. Корзина сохраняется в сессии бота.
- **Оплата**: Генерация QR-кода для оплаты через внешний платежный шлюз (например, Tinkoff или Yandex.Pay). После оплаты бот проверяет статус и отправляет уведомление об успехе.
- **Выбор формата получения заказа**:
  - "Заберу сам": Указание времени самовывоза (из предложенных слотов).
  - "Доставка до офиса": Пользователь вводит детальное описание точки доставки (адрес, ориентиры). Бот подтверждает возможность доставки на основе геолокации.
- **Подтверждение заказа**: После оплаты и выбора формата — отправка сводки заказа пользователю и уведомление кофейне.
- **Бонус: Нейронная сеть для общения**: Интеграция с LLM (например, Grok или аналогичной моделью) для генерации юмористических ответов на запросы пользователей (не связанные с заказом). Реализация через API вызовы, с лимитом на запросы для предотвращения злоупотреблений.
- **Бонус: NFT-стикеры**: Создание уникальных стикеров на базе NFT (используя блокчейн, например, Ethereum или Telegram's TON). Каждый стикер привязывается к уникальной позиции меню (например, "специальный латте"). Пользователь получает стикер после заказа, фиксируя его в своем Telegram-аккаунте. Реализация: генерация NFT через смарт-контракты, интеграция с Telegram Sticker API.

## 4. Требования к интерфейсу

- **UI в Telegram**: Бот использует стандартные элементы Telegram (кнопки, inline-клавиатуры, сообщения с изображениями). Меню отображается как карусель или список кнопок.
- **Навигация**: Простая структура: стартовое меню → выбор категорий → добавление в корзину → оплата → выбор доставки → подтверждение.
- **Визуализация**: Изображения товаров (миниатюры), эмодзи для категорий. Текст сообщений краткий, дружелюбный.
- **Адаптивность**: Корректная работа на мобильных устройствах (iOS/Android). Нет требований к кастомному дизайну, только текстовые/кнопочные интерфейсы.
- **Бонусные элементы**: Для нейронки — специальная кнопка "Поболтать". Для NFT — отображение стикера в сообщении с ссылкой на просмотр в кошельке.

## 5. Нефункциональные требования

- **Производительность**: Время отклика бота — не более 2 секунд на сообщение. Поддержка до 100 одновременных пользователей.
- **Надежность**: Автоматическое восстановление после сбоев Telegram API. Логирование ошибок.
- **Безопасность**: Хранение данных заказов в зашифрованном виде. Соответствие GDPR/ФЗ-152 (если применимо). Нет хранения платежных данных в боте.
- **Совместимость**: Работа с Telegram API версии не ниже 6.0. Поддержка русского и английского языков.
- **Документация**: Руководство по администрированию бота (обновление меню). Пользовательская справка внутри бота (команда /help).
- **Масштабируемость**: Возможность добавления новых позиций меню без перезапуска бота.
- **Бонус**: Для нейронки — фильтрация нецензурных запросов. Для NFT — обеспечение уникальности токенов через блокчейн-верификацию.

## 6. Интеграции и окружение

- **Интеграции**:
  - Telegram Bot API для основного функционала.
  - Платежный шлюз (например, YooKassa или аналог) для генерации QR-кодов.
  - База данных (SQLite или PostgreSQL) для хранения меню и заказов.
  - Геолокационные сервисы (Yandex Maps или Google Maps API) для проверки адресов доставки.
  - (Бонус) API LLM (например, xAI Grok API) для нейронки.
  - (Бонус) Блокчейн-платформа (TON или Ethereum) для NFT, интеграция с Telegram Wallet.
- **Окружение**:
  - Развертывание на сервере (Heroku, AWS или VPS) с Python/Node.js.
  - Доступ с мобильных устройств через Telegram app.
  - Тестирование в sandbox-окружении Telegram.

## 7. Ограничения и допущения

- **Ограничения**:
  - Доставка только в пределах города (радиус 10 км от кофейни).
  - Оплата только по QR-коду, без интеграции с картами внутри бота.
  - Нет поддержки видео/аудио в меню.
  - (Бонус) Нейронка ограничена 5 сообщениями в сессии во избежание затрат.
  - (Бонус) NFT-стикеры генерируются только для премиум-позиций, не для всех заказов.
- **Допущения**:
  - Заказчик предоставит актуальное меню и изображения.
  - Поддержка бота (обновления, модерация) ложится на заказчика после сдачи.
  - Пользователи имеют Telegram версии не ниже 8.0.
  - Нет ответственности за задержки доставки (зависит от кофейни).

## 8. Критерии приёмки

- **Функциональные тесты**: Все сценарии (просмотр меню, добавление в корзину, оплата, выбор доставки) проходят без ошибок. Тестирование на 10 заказах.
- **Интерфейс**: Корректное отображение на Android/iOS. Нет сбоев в навигации.
- **Нефункциональные**: Отклик <2 сек, 99% uptime в тестовом периоде (1 неделя).
- **Бонус**: Нейронка генерирует coherent ответы (ручная проверка 5 запросов). NFT-стикеры успешно фиксируются и отображаются.
- **Общие**: Полное соответствие ТЗ. Подписание акта приёмки после демонстрации.
- Проект считается завершённым при прохождении всех тестов и получении подтверждения от заказчика.

## 9. Приложения

- **Схемы**: 
  - Диаграмма потока заказа (см. прикреплённый файл order_flow.png, если доступен).
- **Макеты**: Примеры inline-клавиатур (описаны в тексте, визуалы — по запросу).
- **Сроки и бюджет**: 
  - Разработка: 4 недели.
  - Тестирование: 1 неделя.
  - Бюджет: Рассчитывается на основе ТЗ (ориентировочно 500 000 руб., включая бонусы).
- **Дополнения**: Возможные изменения — по взаимному согласию, с корректировкой сроков/бюджета.
- **Бонусные реализации**:
  - Нейронка: Используем pre-trained модель (Grok), fine-tune на юмористических диалогах. API-вызовы с токен-лимитом.
  - NFT: Смарт-контракт на TON для минтинга. Интеграция: после оплаты бот вызывает контракт, генерирует токен и отправляет ссылку на стикер.